import React, { useContext, useEffect, useState } from "react";
import { PieChart } from "react-minimal-pie-chart";
import { get, sortBy } from "lodash";
import numeral from "numeral";

import LinearChart from '../LinearChart';

import { useStyles } from "./styles";
import MarketAPIs from "../../shared/contracts/MarketAPIs";
import { fromWei, toWei } from "../../shared/helper";
import { AccountContext } from "../../shared/AccountContextProvider";
import {
    useGetMarketBuyPrices,
    useGetMarketOptionsGraphItems,
} from "../../pages/Market/hooks";

import { getDataRan } from './generate-data';

function OutcomeBlock(props) {
    const classes = useStyles();
    return (
        <div className={classes.OutcomeBlock}>
            <div className={classes.OutcomeBlock__Chart}>
                <PieChart
                    style={{ height: "35px", width: "35px" }}
                    label={({ dataEntry, index }) => `${dataEntry.title}`}
                    labelStyle={{
                        fontSize: "30px",
                        fontWeight: "700",
                        fill: "#818B95",
                        textTransform: "none",
                    }}
                    labelPosition={0}
                    data={[
                        {
                            title: "",
                            value: 100 - (props.value || 0) * 100,
                            color: "#E9EEF3",
                        },
                        {
                            title: `${props.label}`,
                            value: (props.value || 0) * 100,
                            color: `${props.color}`,
                        },
                    ]}
                    lineWidth={25}
                    rounded
                />
            </div>
            <div className={classes.OutcomeBlock__Val}>
                {numeral(props.value || 0).format("$0,0.00")}
            </div>
        </div>
    );
}

function MarketOutcome(props) {
    const classes = useStyles();
    const accountContext = useContext(AccountContext);
    const pricesOfBuy = useGetMarketBuyPrices(
        accountContext.account,
        props.marketContractAddress,
        props.optionTokensPercentage
    );
    const marketOptionsGraphItems = useGetMarketOptionsGraphItems(
        accountContext.account,
        props.marketContractAddress,
        '1h'
    );

    const timeframe = '1h';


    const series = [
        {
            "id": 0,
            "market_id": 24,
            "title": "Yes",
            "shares": 94.71572477900918,
            "price": 0.35298007574404955,
            "price_charts": [
                {
                    "timeframe": "1h",
                    "prices": [
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624226100,
                            "date": "2021-06-20T21:55:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624226400,
                            "date": "2021-06-20T22:00:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624226700,
                            "date": "2021-06-20T22:05:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624227000,
                            "date": "2021-06-20T22:10:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624227300,
                            "date": "2021-06-20T22:15:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624227600,
                            "date": "2021-06-20T22:20:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624227900,
                            "date": "2021-06-20T22:25:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624228200,
                            "date": "2021-06-20T22:30:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624228500,
                            "date": "2021-06-20T22:35:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624228800,
                            "date": "2021-06-20T22:40:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624229100,
                            "date": "2021-06-20T22:45:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624229400,
                            "date": "2021-06-20T22:50:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624229660,
                            "date": "2021-06-20T22:54:20.000+00:00"
                        }
                    ],
                    "change_percent": 0.0
                },
                {
                    "timeframe": "24h",
                    "prices": [
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624143600,
                            "date": "2021-06-19T23:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624147200,
                            "date": "2021-06-20T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624150800,
                            "date": "2021-06-20T01:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624154400,
                            "date": "2021-06-20T02:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624158000,
                            "date": "2021-06-20T03:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624161600,
                            "date": "2021-06-20T04:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624165200,
                            "date": "2021-06-20T05:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624168800,
                            "date": "2021-06-20T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624172400,
                            "date": "2021-06-20T07:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624176000,
                            "date": "2021-06-20T08:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624179600,
                            "date": "2021-06-20T09:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624183200,
                            "date": "2021-06-20T10:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624186800,
                            "date": "2021-06-20T11:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624190400,
                            "date": "2021-06-20T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624194000,
                            "date": "2021-06-20T13:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395560576510122,
                            "timestamp": 1624197600,
                            "date": "2021-06-20T14:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395818715287713,
                            "timestamp": 1624201200,
                            "date": "2021-06-20T15:00:00.000+00:00"
                        },
                        {
                            "value": 0.3373123132470055,
                            "timestamp": 1624204800,
                            "date": "2021-06-20T16:00:00.000+00:00"
                        },
                        {
                            "value": 0.3373123132470055,
                            "timestamp": 1624208400,
                            "date": "2021-06-20T17:00:00.000+00:00"
                        },
                        {
                            "value": 0.3373123132470055,
                            "timestamp": 1624212000,
                            "date": "2021-06-20T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.3373123132470055,
                            "timestamp": 1624215600,
                            "date": "2021-06-20T19:00:00.000+00:00"
                        },
                        {
                            "value": 0.3373123132470055,
                            "timestamp": 1624219200,
                            "date": "2021-06-20T20:00:00.000+00:00"
                        },
                        {
                            "value": 0.3373123132470055,
                            "timestamp": 1624222800,
                            "date": "2021-06-20T21:00:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624226400,
                            "date": "2021-06-20T22:00:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624229660,
                            "date": "2021-06-20T22:09:13.000+00:00"
                        }
                    ],
                    "change_percent": 0.039615400466215867
                },
                {
                    "timeframe": "7d",
                    "prices": [
                        {
                            "value": 0.34929380653657816,
                            "timestamp": 1623628800,
                            "date": "2021-06-14T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.34929380653657816,
                            "timestamp": 1623650400,
                            "date": "2021-06-14T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.3054403047081283,
                            "timestamp": 1623672000,
                            "date": "2021-06-14T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.3118715810959145,
                            "timestamp": 1623693600,
                            "date": "2021-06-14T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.3118715810959145,
                            "timestamp": 1623715200,
                            "date": "2021-06-15T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.31280215843797005,
                            "timestamp": 1623736800,
                            "date": "2021-06-15T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.31280215843797005,
                            "timestamp": 1623758400,
                            "date": "2021-06-15T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.340458188465777,
                            "timestamp": 1623780000,
                            "date": "2021-06-15T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.34313334088685926,
                            "timestamp": 1623801600,
                            "date": "2021-06-16T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.34313334088685926,
                            "timestamp": 1623823200,
                            "date": "2021-06-16T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.3337407331006765,
                            "timestamp": 1623844800,
                            "date": "2021-06-16T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.3337407331006765,
                            "timestamp": 1623866400,
                            "date": "2021-06-16T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.3337407331006765,
                            "timestamp": 1623888000,
                            "date": "2021-06-17T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3416579280448298,
                            "timestamp": 1623909600,
                            "date": "2021-06-17T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.3416579280448298,
                            "timestamp": 1623931200,
                            "date": "2021-06-17T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.3407298949981127,
                            "timestamp": 1623952800,
                            "date": "2021-06-17T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.3407298949981127,
                            "timestamp": 1623974400,
                            "date": "2021-06-18T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3407298949981127,
                            "timestamp": 1623996000,
                            "date": "2021-06-18T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.3407298949981127,
                            "timestamp": 1624017600,
                            "date": "2021-06-18T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.3407298949981127,
                            "timestamp": 1624039200,
                            "date": "2021-06-18T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.3407298949981127,
                            "timestamp": 1624060800,
                            "date": "2021-06-19T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3407298949981127,
                            "timestamp": 1624082400,
                            "date": "2021-06-19T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395340772872237,
                            "timestamp": 1624104000,
                            "date": "2021-06-19T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395340772872237,
                            "timestamp": 1624125600,
                            "date": "2021-06-19T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624147200,
                            "date": "2021-06-20T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624168800,
                            "date": "2021-06-20T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624190400,
                            "date": "2021-06-20T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.3373123132470055,
                            "timestamp": 1624212000,
                            "date": "2021-06-20T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624229660,
                            "date": "2021-06-20T21:25:36.000+00:00"
                        }
                    ],
                    "change_percent": 0.010553491469037444
                },
                {
                    "timeframe": "30d",
                    "prices": [
                        {
                            "value": 0.7195809237370742,
                            "timestamp": 1621641600,
                            "date": "2021-05-22T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6381208616963003,
                            "timestamp": 1621728000,
                            "date": "2021-05-23T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.61066262929361,
                            "timestamp": 1621814400,
                            "date": "2021-05-24T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5765332930200257,
                            "timestamp": 1621900800,
                            "date": "2021-05-25T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5005373814168025,
                            "timestamp": 1621987200,
                            "date": "2021-05-26T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5177363144660676,
                            "timestamp": 1622073600,
                            "date": "2021-05-27T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.4743111009863794,
                            "timestamp": 1622160000,
                            "date": "2021-05-28T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.474689339155149,
                            "timestamp": 1622246400,
                            "date": "2021-05-29T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5145203137975423,
                            "timestamp": 1622332800,
                            "date": "2021-05-30T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5019986203226394,
                            "timestamp": 1622419200,
                            "date": "2021-05-31T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.45978920829985886,
                            "timestamp": 1622505600,
                            "date": "2021-06-01T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.4847101609721429,
                            "timestamp": 1622592000,
                            "date": "2021-06-02T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.47362874593869797,
                            "timestamp": 1622678400,
                            "date": "2021-06-03T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.4422782754372168,
                            "timestamp": 1622764800,
                            "date": "2021-06-04T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.41372385402629874,
                            "timestamp": 1622851200,
                            "date": "2021-06-05T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.40159558291993364,
                            "timestamp": 1622937600,
                            "date": "2021-06-06T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.42207532973485007,
                            "timestamp": 1623024000,
                            "date": "2021-06-07T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.404154106554845,
                            "timestamp": 1623110400,
                            "date": "2021-06-08T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3252959966182473,
                            "timestamp": 1623196800,
                            "date": "2021-06-09T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3315702061048472,
                            "timestamp": 1623283200,
                            "date": "2021-06-10T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3353393660438634,
                            "timestamp": 1623369600,
                            "date": "2021-06-11T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.38032745503290655,
                            "timestamp": 1623456000,
                            "date": "2021-06-12T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3513295985788659,
                            "timestamp": 1623542400,
                            "date": "2021-06-13T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.34929380653657816,
                            "timestamp": 1623628800,
                            "date": "2021-06-14T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3118715810959145,
                            "timestamp": 1623715200,
                            "date": "2021-06-15T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.34313334088685926,
                            "timestamp": 1623801600,
                            "date": "2021-06-16T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3337407331006765,
                            "timestamp": 1623888000,
                            "date": "2021-06-17T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3407298949981127,
                            "timestamp": 1623974400,
                            "date": "2021-06-18T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3407298949981127,
                            "timestamp": 1624060800,
                            "date": "2021-06-19T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624147200,
                            "date": "2021-06-20T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624229660,
                            "date": "2021-06-20T21:25:36.000+00:00"
                        }
                    ],
                    "change_percent": -0.5094643783622257
                },
                {
                    "timeframe": "all",
                    "prices": [
                        {
                            "value": 0.5,
                            "timestamp": 1621259356,
                            "date": "2021-05-17T13:49:16.000+00:00"
                        },
                        {
                            "value": 0.641314381536302,
                            "timestamp": 1621382400,
                            "date": "2021-05-19T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.7165983708809315,
                            "timestamp": 1621555200,
                            "date": "2021-05-21T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6381208616963003,
                            "timestamp": 1621728000,
                            "date": "2021-05-23T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5765332930200257,
                            "timestamp": 1621900800,
                            "date": "2021-05-25T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5177363144660676,
                            "timestamp": 1622073600,
                            "date": "2021-05-27T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.474689339155149,
                            "timestamp": 1622246400,
                            "date": "2021-05-29T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5019986203226394,
                            "timestamp": 1622419200,
                            "date": "2021-05-31T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.4847101609721429,
                            "timestamp": 1622592000,
                            "date": "2021-06-02T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.4422782754372168,
                            "timestamp": 1622764800,
                            "date": "2021-06-04T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.40159558291993364,
                            "timestamp": 1622937600,
                            "date": "2021-06-06T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.404154106554845,
                            "timestamp": 1623110400,
                            "date": "2021-06-08T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3315702061048472,
                            "timestamp": 1623283200,
                            "date": "2021-06-10T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.38032745503290655,
                            "timestamp": 1623456000,
                            "date": "2021-06-12T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.34929380653657816,
                            "timestamp": 1623628800,
                            "date": "2021-06-14T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.34313334088685926,
                            "timestamp": 1623801600,
                            "date": "2021-06-16T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3407298949981127,
                            "timestamp": 1623974400,
                            "date": "2021-06-18T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3395294794457215,
                            "timestamp": 1624147200,
                            "date": "2021-06-20T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.35298007574404955,
                            "timestamp": 1624229660,
                            "date": "2021-06-20T21:25:36.000+00:00"
                        }
                    ],
                    "change_percent": -0.2940398485119009
                }
            ]
        },
        {
            "id": 1,
            "market_id": 24,
            "title": "No",
            "shares": 51.67192300158869,
            "price": 0.6470199242559505,
            "price_charts": [
                {
                    "timeframe": "1h",
                    "prices": [
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624226100,
                            "date": "2021-06-20T21:55:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624226400,
                            "date": "2021-06-20T22:00:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624226700,
                            "date": "2021-06-20T22:05:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624227000,
                            "date": "2021-06-20T22:10:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624227300,
                            "date": "2021-06-20T22:15:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624227600,
                            "date": "2021-06-20T22:20:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624227900,
                            "date": "2021-06-20T22:25:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624228200,
                            "date": "2021-06-20T22:30:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624228500,
                            "date": "2021-06-20T22:35:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624228800,
                            "date": "2021-06-20T22:40:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624229100,
                            "date": "2021-06-20T22:45:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624229400,
                            "date": "2021-06-20T22:50:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624229660,
                            "date": "2021-06-20T22:54:20.000+00:00"
                        }
                    ],
                    "change_percent": 0.0
                },
                {
                    "timeframe": "24h",
                    "prices": [
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624143600,
                            "date": "2021-06-19T23:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624147200,
                            "date": "2021-06-20T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624150800,
                            "date": "2021-06-20T01:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624154400,
                            "date": "2021-06-20T02:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624158000,
                            "date": "2021-06-20T03:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624161600,
                            "date": "2021-06-20T04:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624165200,
                            "date": "2021-06-20T05:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624168800,
                            "date": "2021-06-20T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624172400,
                            "date": "2021-06-20T07:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624176000,
                            "date": "2021-06-20T08:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624179600,
                            "date": "2021-06-20T09:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624183200,
                            "date": "2021-06-20T10:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624186800,
                            "date": "2021-06-20T11:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624190400,
                            "date": "2021-06-20T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624194000,
                            "date": "2021-06-20T13:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604439423489877,
                            "timestamp": 1624197600,
                            "date": "2021-06-20T14:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604181284712287,
                            "timestamp": 1624201200,
                            "date": "2021-06-20T15:00:00.000+00:00"
                        },
                        {
                            "value": 0.6626876867529944,
                            "timestamp": 1624204800,
                            "date": "2021-06-20T16:00:00.000+00:00"
                        },
                        {
                            "value": 0.6626876867529944,
                            "timestamp": 1624208400,
                            "date": "2021-06-20T17:00:00.000+00:00"
                        },
                        {
                            "value": 0.6626876867529944,
                            "timestamp": 1624212000,
                            "date": "2021-06-20T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.6626876867529944,
                            "timestamp": 1624215600,
                            "date": "2021-06-20T19:00:00.000+00:00"
                        },
                        {
                            "value": 0.6626876867529944,
                            "timestamp": 1624219200,
                            "date": "2021-06-20T20:00:00.000+00:00"
                        },
                        {
                            "value": 0.6626876867529944,
                            "timestamp": 1624222800,
                            "date": "2021-06-20T21:00:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624226400,
                            "date": "2021-06-20T22:00:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624229660,
                            "date": "2021-06-20T22:09:13.000+00:00"
                        }
                    ],
                    "change_percent": -0.020365172827153805
                },
                {
                    "timeframe": "7d",
                    "prices": [
                        {
                            "value": 0.6507061934634218,
                            "timestamp": 1623628800,
                            "date": "2021-06-14T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6507061934634218,
                            "timestamp": 1623650400,
                            "date": "2021-06-14T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.6945596952918718,
                            "timestamp": 1623672000,
                            "date": "2021-06-14T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.6881284189040855,
                            "timestamp": 1623693600,
                            "date": "2021-06-14T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.6881284189040855,
                            "timestamp": 1623715200,
                            "date": "2021-06-15T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6871978415620299,
                            "timestamp": 1623736800,
                            "date": "2021-06-15T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.6871978415620299,
                            "timestamp": 1623758400,
                            "date": "2021-06-15T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.659541811534223,
                            "timestamp": 1623780000,
                            "date": "2021-06-15T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.6568666591131407,
                            "timestamp": 1623801600,
                            "date": "2021-06-16T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6568666591131407,
                            "timestamp": 1623823200,
                            "date": "2021-06-16T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.6662592668993235,
                            "timestamp": 1623844800,
                            "date": "2021-06-16T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.6662592668993235,
                            "timestamp": 1623866400,
                            "date": "2021-06-16T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.6662592668993235,
                            "timestamp": 1623888000,
                            "date": "2021-06-17T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6583420719551701,
                            "timestamp": 1623909600,
                            "date": "2021-06-17T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.6583420719551701,
                            "timestamp": 1623931200,
                            "date": "2021-06-17T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.6592701050018873,
                            "timestamp": 1623952800,
                            "date": "2021-06-17T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.6592701050018873,
                            "timestamp": 1623974400,
                            "date": "2021-06-18T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6592701050018873,
                            "timestamp": 1623996000,
                            "date": "2021-06-18T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.6592701050018873,
                            "timestamp": 1624017600,
                            "date": "2021-06-18T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.6592701050018873,
                            "timestamp": 1624039200,
                            "date": "2021-06-18T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.6592701050018873,
                            "timestamp": 1624060800,
                            "date": "2021-06-19T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6592701050018873,
                            "timestamp": 1624082400,
                            "date": "2021-06-19T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604659227127763,
                            "timestamp": 1624104000,
                            "date": "2021-06-19T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604659227127763,
                            "timestamp": 1624125600,
                            "date": "2021-06-19T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624147200,
                            "date": "2021-06-20T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624168800,
                            "date": "2021-06-20T06:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624190400,
                            "date": "2021-06-20T12:00:00.000+00:00"
                        },
                        {
                            "value": 0.6626876867529944,
                            "timestamp": 1624212000,
                            "date": "2021-06-20T18:00:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624229660,
                            "date": "2021-06-20T21:25:36.000+00:00"
                        }
                    ],
                    "change_percent": -0.0056650286173718575
                },
                {
                    "timeframe": "30d",
                    "prices": [
                        {
                            "value": 0.28041907626292584,
                            "timestamp": 1621641600,
                            "date": "2021-05-22T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3618791383036997,
                            "timestamp": 1621728000,
                            "date": "2021-05-23T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.38933737070639,
                            "timestamp": 1621814400,
                            "date": "2021-05-24T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.4234667069799744,
                            "timestamp": 1621900800,
                            "date": "2021-05-25T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.49946261858319757,
                            "timestamp": 1621987200,
                            "date": "2021-05-26T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.48226368553393234,
                            "timestamp": 1622073600,
                            "date": "2021-05-27T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5256888990136206,
                            "timestamp": 1622160000,
                            "date": "2021-05-28T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.525310660844851,
                            "timestamp": 1622246400,
                            "date": "2021-05-29T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.4854796862024578,
                            "timestamp": 1622332800,
                            "date": "2021-05-30T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.4980013796773606,
                            "timestamp": 1622419200,
                            "date": "2021-05-31T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5402107917001411,
                            "timestamp": 1622505600,
                            "date": "2021-06-01T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5152898390278571,
                            "timestamp": 1622592000,
                            "date": "2021-06-02T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.526371254061302,
                            "timestamp": 1622678400,
                            "date": "2021-06-03T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5577217245627831,
                            "timestamp": 1622764800,
                            "date": "2021-06-04T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5862761459737013,
                            "timestamp": 1622851200,
                            "date": "2021-06-05T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5984044170800664,
                            "timestamp": 1622937600,
                            "date": "2021-06-06T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5779246702651499,
                            "timestamp": 1623024000,
                            "date": "2021-06-07T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5958458934451549,
                            "timestamp": 1623110400,
                            "date": "2021-06-08T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6747040033817527,
                            "timestamp": 1623196800,
                            "date": "2021-06-09T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6684297938951528,
                            "timestamp": 1623283200,
                            "date": "2021-06-10T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6646606339561367,
                            "timestamp": 1623369600,
                            "date": "2021-06-11T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6196725449670935,
                            "timestamp": 1623456000,
                            "date": "2021-06-12T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6486704014211341,
                            "timestamp": 1623542400,
                            "date": "2021-06-13T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6507061934634218,
                            "timestamp": 1623628800,
                            "date": "2021-06-14T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6881284189040855,
                            "timestamp": 1623715200,
                            "date": "2021-06-15T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6568666591131407,
                            "timestamp": 1623801600,
                            "date": "2021-06-16T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6662592668993235,
                            "timestamp": 1623888000,
                            "date": "2021-06-17T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6592701050018873,
                            "timestamp": 1623974400,
                            "date": "2021-06-18T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6592701050018873,
                            "timestamp": 1624060800,
                            "date": "2021-06-19T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624147200,
                            "date": "2021-06-20T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624229660,
                            "date": "2021-06-20T21:25:37.000+00:00"
                        }
                    ],
                    "change_percent": 1.3073320577138383
                },
                {
                    "timeframe": "all",
                    "prices": [
                        {
                            "value": 0.5,
                            "timestamp": 1621259356,
                            "date": "2021-05-17T13:49:16.000+00:00"
                        },
                        {
                            "value": 0.3586856184636979,
                            "timestamp": 1621382400,
                            "date": "2021-05-19T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.28340162911906847,
                            "timestamp": 1621555200,
                            "date": "2021-05-21T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.3618791383036997,
                            "timestamp": 1621728000,
                            "date": "2021-05-23T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.4234667069799744,
                            "timestamp": 1621900800,
                            "date": "2021-05-25T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.48226368553393234,
                            "timestamp": 1622073600,
                            "date": "2021-05-27T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.525310660844851,
                            "timestamp": 1622246400,
                            "date": "2021-05-29T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.4980013796773606,
                            "timestamp": 1622419200,
                            "date": "2021-05-31T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5152898390278571,
                            "timestamp": 1622592000,
                            "date": "2021-06-02T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5577217245627831,
                            "timestamp": 1622764800,
                            "date": "2021-06-04T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5984044170800664,
                            "timestamp": 1622937600,
                            "date": "2021-06-06T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.5958458934451549,
                            "timestamp": 1623110400,
                            "date": "2021-06-08T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6684297938951528,
                            "timestamp": 1623283200,
                            "date": "2021-06-10T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6196725449670935,
                            "timestamp": 1623456000,
                            "date": "2021-06-12T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6507061934634218,
                            "timestamp": 1623628800,
                            "date": "2021-06-14T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6568666591131407,
                            "timestamp": 1623801600,
                            "date": "2021-06-16T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6592701050018873,
                            "timestamp": 1623974400,
                            "date": "2021-06-18T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6604705205542786,
                            "timestamp": 1624147200,
                            "date": "2021-06-20T00:00:00.000+00:00"
                        },
                        {
                            "value": 0.6470199242559505,
                            "timestamp": 1624229660,
                            "date": "2021-06-20T21:25:37.000+00:00"
                        }
                    ],
                    "change_percent": 0.2940398485119009
                }
            ]
        }
    ];

    const getSeries = () => {
        console.log("Dddd", series.map((entry) => {
            return {
                name: entry.title,
                data: entry.price_charts[3].prices.map((entry) => {
                    return {
                        x: entry.date,
                        y: entry.value
                    }
                })
            }
        }));

        if(marketOptionsGraphItems && Object.keys(marketOptionsGraphItems).length > 0) {
            let pricesArray = [];
            Object.keys(marketOptionsGraphItems).forEach((entry) => {
                pricesArray.push({
                    x: parseInt(entry),
                    y: marketOptionsGraphItems[entry]
                })
            });

            pricesArray = sortBy(pricesArray, 'x')

            const yesSeries = {
                name: 'Yes',
                data: pricesArray
            };

            const noSeries = {
                name: 'No',
                data: pricesArray.map((entry) => {
                    return {
                        x: entry.x,
                        y: 1-entry.y
                    }
                })
            };

            return [yesSeries, noSeries];
        }

        return [];

        return series.map((entry) => {
            return {
                name: entry.title,
                data: entry.price_charts[3].prices.map((entry) => {
                    return {
                        x: entry.date,
                        y: entry.value
                    }
                })
            }
        });
    };

    //Vote
    const [isProcessing, setIsProcessing] = useState(false);

    const loadMarketInfo = async () => {

        const marketAPIs = new MarketAPIs();
        //const result = await marketAPIs.getMarketInfo(accountContext.account, props.marketContractAddress);
    };

    useEffect(() => {
        loadMarketInfo();
    }, []);

    return (
        <div className={classes.MarketOutcome}>
            <div className={classes.MarketOutcomeHeader}>
                <div className={classes.MarketOutcomeHeader__Val}>Outcome</div>
                <div className={classes.MarketOutcomeHeader__Progress}>
                    <OutcomeBlock
                        label={"Yes"}
                        value={pricesOfBuy[0]}
                        color={"#2E6AFA"}
                    />
                    <OutcomeBlock
                        label={"No"}
                        value={pricesOfBuy[1]}
                        color={"#EB5757"}
                    />
                </div>
            </div>
            <div className={classes.MarketOutcomeBody}>
                <LinearChart
                    series={getSeries()}
                />
            </div>
        </div>
    );
}

export default MarketOutcome;
